<!DOCTYPE html>
<html>

<link href="https://fonts.googleapis.com/css2?family=Play&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css" />

<head>
    <title>Спортивний клуб нового формату &bull; Healthy Club</title>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=640, initial-scale=1">

    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.5.8/slick.min.js'></script>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.5.8/slick.min.css'>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.5.8/slick-theme.min.css'>

    <script src="https://kit.fontawesome.com/225277b5de.js" crossorigin="anonymous"></script>
</head>

<body>
    <!--напрямки, розклад, наша команда, контакти-->

    <div class="container">
        <div class="top">
            <div class="healty-club-image_container">
                <img class="healty-club-image" src="images/boardMontazhnaya-oblast-1.svg">
            </div>

            <div class="margin"></div>

            <div class="path_buttons">
                <div class="path_buttons path_button_container">
                    <a class="path_buttons directions_button path_button">
                        <span>
                            напрямки
                        </span>
                    </a>
                </div>

                <div class="path_buttons path_button_container">
                    <a class="path_buttons timetable_button path_button">
                        <span>
                            розклад
                        </span>
                    </a>
                </div>

                <div class="path_buttons path_button_container">
                    <a class="path_buttons our_team_button path_button">
                        <span>
                            команда
                        </span>
                    </a>
                </div>

                <div class="path_buttons path_button_container">
                    <a class="path_buttons contacts_button path_button">
                        <span>
                            контакти
                        </span>
                    </a>
                </div>
            </div>

            <div class="link_buttons">
                <div class="link_buttons link_button_container">
                    <div class="link_buttons link_button">
                        <a class='fab instagram' href="https://www.instagram.com/instahealthyclub/"
                            target="_blank">&#xf16d;</a>
                    </div>
                </div>

                <div class="link_buttons link_button_container">
                    <div class="link_buttons link_button">
                        <a class='fab facebook' href="https://www.facebook.com/healthyclubfit"
                            target="_blank">&#xf09a;</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="bottom">
            <div class="wrapper">
                <div class="carousel">
                    <div><img src="images/photo_2022-09-24_10-11-40.jpg"></div>
                    <div><img src="images/photo_2022-09-24_10-12-08.jpg"></div>
                    <div><img src="images/photo_2022-09-25_19-20-59.jpg"></div>
                    <div><img src="images/photo_2022-09-25_20-42-32.jpg"></div>
                    <div><img src="images/photo_2022-09-25_20-43-13.jpg"></div>
                </div>
            </div>

            <div class="greeting">
                <div class="greeting1">
                    <span>
                        Ласкаво просимо вас у <span style="color: rgb(95, 196, 95);">Healthy</span><span style="color: rgb(150 111 194);">Club</span>!
                    </span>
                </div>

                <span>
                    В нашому клубі проводяться індивідуальні та групові заняття з наступних нарямків:
                </span>
            </div>

            <div class="directions">
                <div class="directions_container">
                    <div class="directions_buttons"></div>
                    <div class="direction_table"></div>
                </div>
            </div>

            <div class="text1">НАША КОМАНДА</div>
            <div class="team">
                <div class="team_container"></div>
            </div>

            <div class="text2">РОЗКЛАД</div>
            <div class="shedule"></div>

            <div class="map">
                <div class="map_container">
                    <iframe src="https://snazzymaps.com/embed/279416" class="iframe_map"></iframe>
                </div>
            </div>

            <div class="contacts">
                <div class="contacts c">
                    <span>
                        Адміністратор
                    </span>

                    <span>
                        098 458 2808
                    </span>

                    <span>
                        Viber
                    </span>

                    <span>
                        Telegram
                    </span>
                </div>

                <div class="contacts c">
                    <span>
                        Адреса
                    </span>

                    <span>
                        Києво-Святошинський район,
                    </span>

                    <span>
                        с.Хотів
                    </span>

                    <span>
                        вул. Партизанська, 1а
                    </span>
                </div>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            $('.carousel').slick({
                slidesToShow: 1, 
                centerMode: true, 
                variableWidth: true,
                slidesToScroll: 1,
                autoplay: true,
                autoplaySpeed: 3000
            });
        });

        const show = (branch) => {
            return (event) => {
                for (var i = 0; i < document.querySelector('.directions_buttons').childNodes.length; i++) {
                    document.querySelector('.directions_buttons').childNodes[i].childNodes[1].childNodes[1].style.borderBottom = '';
                }

                var number = null;

                for (var i = 0; i < event.path.length; i++) {
                    if (event.path[i].classList) {
                        if (event.path[i].classList[1] === branch.id) {
                            number = i;
                        }
                    }
                }

                console.log(i);

                for (var i = 0; i < document.querySelector('.directions_buttons').childNodes.length; i++) {
                    if (document.querySelector('.directions_buttons').childNodes[i].classList[1] === event.path[number].classList[1]) {
                        document.querySelector('.directions_buttons').childNodes[i].childNodes[1].childNodes[1].style.borderBottom = '2px solid #fff';
                        console.log(document.querySelector('.directions_buttons').childNodes[i].style);
                    }
                }

                var text = branch.text.split('\n');
                var html = document.createElement('div');

                for (var a = 0; a < text.length; a++) {
                    var p = document.createElement('p');
                    p.innerHTML = text[a];

                    html.appendChild(p);
                }

                html.className = 'branch_description';

                var img = document.createElement('img');
                img.src = `images/branches/${branch.id}.jpg`;
                img.className = 'branch_img';

                var branch_container = document.createElement('div');
                branch_container.className = 'branch_container';

                branch_container.appendChild(html);
                document.querySelector('.direction_table').style.display = 'flex';
                document.querySelector('.direction_table').innerHTML = '';
                document.querySelector('.direction_table').appendChild(img);
                document.querySelector('.direction_table').appendChild(branch_container);
            }
        }

        var healthyclub = {};

        fetch("https://translate-3dcoat.herokuapp.com/healthyclubshedule").then(r => r.text().then(
            t => {
                try {
                    healthyclub = JSON.parse(t);
                    var tab = document.querySelector(".shedule");
                    if (tab) {
                        while (tab.firstChild) {
                            tab.firstChild.remove();
                        }
                        tbl = document.createElement('table');
                        tbl.id = "demo";
                        var days = ['', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Нд'];
                        const tr = tbl.insertRow();
                        for (var i = 0; i < 8; i++) {
                            const td = tr.insertCell();
                            var bb = document.createElement('b');
                            bb.appendChild(document.createTextNode(days[i]));
                            td.appendChild(bb);
                        }
                        for (let i = 0; i < healthyclub.shedule.length; i++) {
                            var h = healthyclub.shedule[i];
                            const tr = tbl.insertRow();
                            if (i % 2 === 0) tr.style['background-color'] = 'rgba(0.5, 0.5, 0.5, 0.05)';
                            const td = tr.insertCell();
                            td.appendChild(document.createTextNode(h.time));
                            td.style.width = '10%';
                            for (var j = 0; j < 7; j++) {
                                const td = tr.insertCell();
                                var d = h.days[j];
                                if (d.length === 0) d = '-';
                                td.appendChild(document.createTextNode(d));
                            }
                        }
                        tab.appendChild(tbl);
                    }

                    for (var i = 0; i < healthyclub.branches.length; i++) {
                        var button = document.createElement('div');
                        button.className = `direction_button ${healthyclub.branches[i].id}`;
                        button.innerHTML = `
                            <a>
                                <span>
                                    ${healthyclub.branches[i].branch}
                                </span>
                            </a>
                        `;

                        button.addEventListener('click', show(healthyclub.branches[i]));
                        document.querySelector('.directions_buttons').appendChild(button);
                    }

                    document.querySelector(`.${healthyclub.branches[0].id}`).click();

                    for (var i = 0; i < healthyclub.team.length; i++) {
                        if (healthyclub.team[i].text) {
                            var member = document.createElement('div');
                            member.className = `member ${healthyclub.team[i].id}`;

                            var name = document.createElement('div');
                            name.className = 'member_name';
                            name.innerHTML = `${healthyclub.team[i].teacher}`;

                            var text = document.createElement('div');
                            text.className = 'member_description';

                            var img = document.createElement('img');
                            img.className = 'member_image';
                            img.src = `images/team/${healthyclub.team[i].id}.jpg`;

                            var txt = healthyclub.team[i].text.split('\n');
                            var html = '';

                            for (var a = 0; a < txt.length; a++) {
                                if (txt[a]) html += `<p>${txt[a]}</p>`;
                            }

                            if (html) text.innerHTML = html;

                            var member_container = document.createElement('div');
                            member_container.className = 'member_container';

                            member_container.appendChild(name);
                            member_container.appendChild(text);

                            member.appendChild(img);
                            member.appendChild(member_container);

                            document.querySelector('.team_container').appendChild(member);
                        }
                    }
                } catch {
                    console.log("Unable to parse the response:", t);
                }
            }
        ));

        document.querySelector('.contacts_button').addEventListener('click', (event) => {
            document.querySelector('.contacts').scrollIntoView({
                block: "center", 
                behavior: 'smooth'
            });
        });

        document.querySelector('.timetable_button').addEventListener('click', (event) => {
            document.querySelector('.shedule').scrollIntoView({
                block: "center", 
                behavior: 'smooth'
            });
        });

        document.querySelector('.path_button').addEventListener('click', (event) => {
            document.querySelector('.directions').scrollIntoView({
                block: "center", 
                behavior: 'smooth'
            });
        });

        document.querySelector('.our_team_button').addEventListener('click', (event) => {
            document.querySelector('.team').scrollIntoView({
                block: "center", 
                behavior: 'smooth'
            });
        })
    </script>
</body>

</html>